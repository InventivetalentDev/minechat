<!DOCTYPE html>
<html>
    <head>
        <style>
            html {
                background-color: #212121;
                color: white;
                font-family: monospace;
            }

            img {
                image-rendering: pixelated;
            }

            .char-img {
                height: 3vh;
                padding: 4px;
            }

            .unicode-img {
                height: 65vh;
                padding: 8px;
            }
        </style>
    </head>
    <body>
        <div id="info-container">
            Hi! Click the button to load every character Minecraft can display<br/>
            <button id="load-button">Do it!</button>
            <br/>
            <span id="load-info"></span>
        </div>
        <br/>
        <div>
            ASCII, Accented & Nonlatin Characters
            <div id="char-container">

            </div>
        </div>
        <br/>
        <br/>
        <div>
            <a href="https://unicode-table.com/en/" target="_blank">Unicode Character</a> Pages
            <div id="unicode-container">

            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <script>
            $("#load-button").click(() => {
                $("#load-button").remove();

                let charContainer = $("#char-container")
                let loadInfo = $("#load-info")
                let unicodeContainer = $("#unicode-container")

                fetch("/font_data/minecraft/default/sizes.json").then(res => res.json()).then(sizes => {
                    let ids = Object.keys(sizes);
                    let toLoad = ids.length;


                    for (let i = 0; i < toLoad; i++) {
                        setTimeout(() => loadChar(i), i * 2);
                    }
                    setTimeout(() => $("#info-container").remove(), (toLoad + 5) * 10)

                    function loadChar(i) {
                        loadInfo.text("Loading " + i + "/" + toLoad);
                        let img0 = new Image();
                        img0.onload = () => {
                            charContainer.append("<img class='char-img' src='" + img0.src + "' title='" + ids[i] + "' >")
                        };
                        img0.src = "/font_data/minecraft/default/c" + ids[i] + ".png";
                    }

                });


                for (let j = 0; j < 256; j++) {
                    loadUnicode(j);
                }

                function loadUnicode(i) {
                    let img0 = new Image();
                    img0.onload = () => {
                        unicodeContainer.append("<img class='unicode-img' src='https://assets.mcasset.cloud/20w17a/assets/minecraft/textures/font/unicode_page_"+toHex(i)+".png' title='"+(i*256)+"-"+(i*256+255)+"'>")
                    };
                    img0.src = "https://assets.mcasset.cloud/20w17a/assets/minecraft/textures/font/unicode_page_" + toHex(i) + ".png";
                }

                function toHex(i) {
                    let hex = i.toString(16);
                    if(hex.length<2) {
                        hex = "0" + hex;
                    }
                    return hex;
                }

            })
        </script>
    </body>
</html>
